# 翻译问题排查指南

## 问题：翻译成韩文但显示中文

### 可能的原因

1. **源语言选择错误**
   - 如果 PDF 是中文，但选择了 "English" 作为源语言
   - 翻译会失败，系统会使用原文（中文）

2. **翻译失败**
   - 如果翻译过程中出错，系统会使用原文
   - 检查日志查看具体错误信息

3. **PDF 已经是翻译后的版本**
   - 如果上传的是之前翻译成中文的 PDF
   - 需要选择 "Chinese" 作为源语言

## 解决方案

### 1. 检查源语言选择

**重要**：源语言必须与 PDF 的实际语言匹配！

- 如果 PDF 是**中文**，选择：源语言 = **Chinese**
- 如果 PDF 是**英文**，选择：源语言 = **English**
- 如果 PDF 是**韩文**，选择：源语言 = **Korean**

### 2. 检查翻译日志

查看容器日志，确认翻译是否成功：

```bash
docker-compose logs --tail=100 | findstr /i "翻译"
```

日志会显示：
- `正在翻译第 X 页: Chinese → Korean`
- `第 X 页翻译成功` 或 `第 X 页翻译失败`

### 3. 测试翻译功能

在界面上先测试文本翻译：
1. 展开"文本翻译"区域
2. 输入中文文本："你好，世界"
3. 选择：源语言 = Chinese，目标语言 = Korean
4. 点击"翻译文本"
5. 检查是否输出韩文

### 4. 重新翻译 PDF

1. **确认源语言**：如果 PDF 是中文，选择 **Chinese**
2. **选择目标语言**：选择 **Korean**
3. **重新上传 PDF**：上传原始 PDF（不是翻译后的版本）
4. **点击 Submit**：开始翻译
5. **检查日志**：查看翻译过程是否有错误

## 已添加的改进

1. **详细日志**：现在会记录每页的翻译状态
2. **错误提示**：翻译失败时会记录具体错误信息
3. **翻译统计**：显示翻译成功的页数

## 常见错误

### 错误 1：源语言不匹配
- **症状**：翻译后还是原文
- **解决**：检查并更正源语言选择

### 错误 2：翻译失败
- **症状**：日志显示 "翻译失败"
- **解决**：查看具体错误信息，可能是模型问题或文本过长

### 错误 3：PDF 已经是翻译版本
- **症状**：翻译后没有变化
- **解决**：使用原始 PDF 文件重新翻译

